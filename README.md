# README
## 说在前面的话
- 首次，非常感谢B站up主[**Voidmatrix**](https://space.bilibili.com/25864506)的教学视频对我的帮助。本游戏是参照该大佬的[教学视频](https://space.bilibili.com/25864506/lists/3521064?type=season)所做的开发和拓展；
- 然后，非常感谢B站up主[**终焉苍龙**](https://space.bilibili.com/7054977)的[展示视频](https://www.bilibili.com/video/BV16x43zEEej/?spm_id_from=333.1387.homepage.video_card.click&vd_source=3cd75142b2fcb51c7056448c81846ce3)，我使用Pr软件截取其中角色MOD星见雅的关键帧，并配合Ps软件以及开源软件aseprite完成了对角色模型的构造；
- 再次，需要指出的是，本游戏目前仍处于初级阶段，未来将会进一步更新完善...

## 开发环境及工具
本游戏全程在visual studio环境下开发，使用了EasyX作为图形工具（非游戏引擎），并调用了Windows自带的API辅助开发。

## 代码框架
本游戏依然遵循着大部分游戏的主循环框架：读取操作->更新数据->绘制图像，即以数据驱动为方式的运作模式，实现了输入与渲染的解耦合，开发思路清晰明了。

### 主循环外
在该部分，程序的主要任务是初始化，主要负责耗时耗力的工作。<br>
因为相比于在游戏过程中的等待，人们往往更愿意将时间花在游戏开始前的初始化阶段。<br>
因而，在初始化阶段，必须完成游戏所需资源的加载，以方便在后续的主循环中对资源的快速调用。 <br>
资源的加载诸如UI界面，特效，角色动画，以及音频甚至模型等等，都是需要在游戏正式开始前就加载进内存的。

### 主循环内
游戏的主循环是最核心的部分。程序在这里不断读取玩家的操作，并及时做出反馈，以得到玩家预期的效果。<br>
同时，为了稳定游戏的帧率，使得游戏体验更丝滑，还可以在主循环中引入sleep函数等相关代码实现对每次循环的时间控制，稳定了帧率的同时也减少了CPU的负担。

#### 读取操作
在这里借用EasyX所带的peekmessage函数获取键盘信息，并根据键盘信息修改对应的bool变量值，供下一阶段的更新数据访问。

#### 更新数据
核心驱动力是上一个阶段所传递的bool变量值，根据这些bool变量的值来实现对应的逻辑更新。<br>
同时，也存在自驱力。游戏过程中处于某些需要往往并不可能会随时都对玩家的输入产生反应，但游戏状态仍要进行。<br>
因此，在此情况下，数据会跟随当前的“状态”进行更新。所以需要创建节点类Nodes，由此来描述游戏阶段各个独立事物所处的状态即节点。<br>
然后，抽象出一个节点管理器类来管理对应的节点，实现节点的初始化、更新、跳转等逻辑。
对于角色部分，每个角色不管是玩家还是敌人，都有其共有的数据部分如生命，位置，碰撞箱等以及共有的逻辑部分如数据更新以及图片渲染，
因此有必要抽象出一个角色类character作为基类，使得后面的player类与enemy类均继承自character类，重写部分逻辑并添加自己独有的片段。<br>
同时，引入角色管理器类来管理player类和enemy类，实现对角色类的创建与销毁，更新与渲染。在简化代码思路的同时，也提高了拓展性。
由于角色管理器只需要一个，故采用了单例模式。<br>
刚刚提到了碰撞箱，这也是个很重要的概念。在本游戏中，要判断玩家与敌人的交互与否，就必须创建一个碰撞箱类，存储每个角色所具有的碰撞箱大小以及属性，
在处理数据的时候判断碰撞箱是否满足碰撞条件并执行响应逻辑就行了。当然，这里也单独创建了碰撞箱管理器，并采用单例模式，实现对碰撞箱的管理。<br>
具体表现为将碰撞箱的构造函数私有化，并将碰撞箱管理器设为其友元类，
一切碰撞箱对象都由碰撞箱管理器生成并控制（因为不由管理器生成或者不受管理器控制的碰撞箱是没有意义的）。
随后在角色数据更新后进行碰撞箱数据的更新即可，因为碰撞箱的数据是以角色的基本信息为基础的。

#### 绘制图像
在这个部分通过上个阶段所获取的更新后的数据选择性地进行渲染，利用初始化时所获取的资源，将对应的效果输出在屏幕上。

##游戏操作玩法
玩家初始生命：10；<br>
Boss初始生命：12；<br>
每次普攻获取能量20，喧响值20;<br>
每次战技获取喧响值250;<br>
按键说明如下：
W,S：左右<br>
A,K,SPACE：跳跃<br>
S,L：冲刺（期间无敌）<br>
J：普攻" <br>
E：战技（能量100释放，存储上限300）<br>
Q：终结技（喧响值3000释放，存储上限3000）<br>

## 当前版本信息
V1.0：<br>
完成了基本框架；<br>
缺少音频，缺少菜单界面，表现力不足，功能尚未完善，游戏内容少；<br>

------------

Waiting for update...
